<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>pop-up</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <style>
        * {margin:0; padding:0; box-sizing:border-box}
        html, body {position:relative; width:100%; height:100%; text-align:center; background-color:lavenderblush}
        .full_popup {z-index:100; display:none; position:fixed; width:100%; height:100%; background-color:#fff}
        .full_popup h2 {margin-top:20%}
        .Modal_popup {z-index:100; display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); width:350px; height:192px; margin:auto; padding:50px 30px; background-color:#fff;}
        .dim {content:''; z-index:99; display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:#000; opacity:0.5}
        .input {display:block; width:200px; height:30px; margin:0 auto; margin-top:30px; text-indent:10px; line-height:1.5em;}
        .button {display:block; width:150px; height:50px; margin:20px auto; margin-top:20%; color:#fff; border:none; border-radius:4px; background-color:teal; cursor:pointer;}
        .close {position:absolute; right:20px; top:20px; font-size:30px; color:#222; background:none; border:none;}
        .inner {position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width:300px; margin:auto; padding:50px 30px; background-color:#fff;}
    </style>
</head>
<body>
    <div class="full_popup">
        <h2>This is Full Pop-up!</h2>
        <input class="input" type="text" placeholder="password">
        <button class="close">×</button>
    </div>
    <div class="Modal_popup">
        <h2>This is Modal Pop-up!</h2>
        <input class="input" type="text" placeholder="Input">
        <button class="close">×</button>
    </div>
    <button id="button01" class="button">Full Pop-up!</button>
    <button id="button02" class="button">Modal Pop-up!</button>
    <div class="dim"></div>
    <script>
        // PopUp 생성자 함수 정의
        function PopUp (btn, box, close){
            this.btn = btn;
            this.box = box;
            this.close = close;
        }
        // PopUp open했을 때 메서드
        $(window).resize(function(){
        var windowY = $(window).height();
        var modalY = $('.Modal_popup').outerHeight();  
                // console.log($(window).height());
                // console.log(modalY);
            if (windowY < modalY){
                console.log('window is short!');
                $('.Modal_popup').css('top','0');
            }
        })
        PopUp.prototype.openPop = function(){
            this.box.fadeIn(300);
            $('.dim').fadeIn(300);
            // 바깥 영역 이벤트 무효화
            $('html, body').css({'overflow': 'hidden', 'height': '100%'});
            // 포커스가 pop-up 영역 내에서만 움직인다.
            this.close.focus();
            this.box.on('keydown','button', function(e){
                if (($(this).is(':focus')) && (e.keyCode == 9)){
                    e.preventDefault();
                    $(this).parent().find('input').focus();
                }
            });
            this.box.find('input:first').focus();
        }
        // PopUp close했을 때 메서드
        PopUp.prototype.closePop = function(){
            this.box.fadeOut(300);
            $('.dim').fadeOut(300);
            $('html, body').css({'overflow': 'auto', 'height': 'auto'});
            this.box.off('scroll touchmove mousewheel')
            this.btn.focus();
        }
        // fullPopup 인스턴스 생성
        var fullPopup = new PopUp($('#button01'), $('.full_popup'), $('.full_popup button'));
        fullPopup.btn.on('click', function(){
            fullPopup.openPop();
        });
        fullPopup.close.on('click', function(){
            fullPopup.closePop();
        });
        // modalPopup 인스턴스 생성
        var modalPopup = new PopUp($('#button02'), $('.Modal_popup'), $('.Modal_popup button'));
        modalPopup.btn.on('click', function(){
            modalPopup.openPop();
        });
        modalPopup.close.on('click', function(){
            modalPopup.closePop();
        });
    </script>
</body>
</html>