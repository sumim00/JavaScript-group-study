<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>study_allCheck</title>
    <link rel="stylesheet" href="../css/reset.css" type="text/css">
    <style type="text/css">
        /* common */
        h1 {font-size:16px; margin-top:20px;}
        .wrap {width:900px; margin:0 auto}
        .article {margin-top:20px;}
        /* custom */
        .acc_item {width:300px}
        .acc_tit {width:100%; height:30px; line-height:30px; color:#fff; background-color:blue}
        .acc_cont {width:100%; height:0px; overflow:hidden; transition:height 0.3s ease-out; border:1px solid blue}
        .acc_tit.active+.acc_cont {height:200px;}
    </style>
</head>
<body>
    <div class="wrap">
        <h1>체크박스 전체선택</h1>
        <div class="article">
            <input type="checkbox" name="chkAll" id="chkAll">
            <label for="chkAll">전체선택</label>
            <br>
            <input type="checkbox" name="chkbox01" id="chkbox01_1">
            <label for="chkbox01_1">체크박스1</label>
            <input type="checkbox" name="chkbox01" id="chkbox01_2">
            <label for="chkbox01_2">체크박스2</label>
            <input type="checkbox" name="chkbox01" id="chkbox01_3">
            <label for="chkbox01_3">체크박스3</label>
        </div>
    </div>
    <script src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript">
        // 체크박스 전체선택
        // 전체 버튼 상태 변경됐을 때 전체선택 or 해제
        document.getElementById('chkAll').addEventListener('change',function(e){
            var chkboxes = document.getElementsByName('chkbox01');
            if (this.checked == true){
                chkboxes.forEach(function(value){
                    value.checked = true;
                });
            }
            else {
                chkboxes.forEach(function(value){
                    value.checked = false;
                });
            }
            e.preventDefault();
        });
        
        // 다른 버튼 상태 변경됐을 때 전체 버튼도 변경
        document.getElementsByName('chkbox01').forEach(function(){
            var chkAll = document.getElementById('chkAll');
            var chkboxes = document.getElementsByName('chkbox01');

            this.addEventListener('change', function(e){
                if(chkboxes.length == document.querySelectorAll('input[name = "chkbox01"]:checked').length){
                    chkAll.checked = true;
                }
                else{
                    chkAll.checked = false;
                }
                e.preventDefault();
            });
        });
    </script>
</body>